#fp #typesystem 

作者是Will Crichton，来自布朗大学。这篇论文探讨了在主流的函数式编程语言时代如何重新审视设计模式。作者讨论了应该以函数式设计模式的形式表示哪些知识：这些知识是相对独立的架构概念，但其整体不能作为语言级抽象来表示。作者提出了四个具体的例子来体现这个观点：Witness（证人模式）、状态机、并行列表和注册表。每个模式都在Rust语言中实现，展示了如何通过精心使用复杂的类型系统更好地建模每个领域构造，并在编译时捕获用户错误。

本文探索了在主流函数式编程语言时代如何重新审视设计模式。作者讨论了应该以函数式设计模式的形式表示哪些知识：这些是相对独立的架构概念，但其整体不能作为语言级抽象来表示。作者通过四个具体的例子来体现这个观点：Witness、状态机、并行列表和注册表。每个模式都在Rust中实现，展示了如何通过精心使用复杂的类型系统来更好地建模每个领域构造，并在编译时捕获用户错误。

1. 引言： 函数式编程设计模式都在哪里？十多年来，人们一直在寻找这个问题的答案。随着函数式编程概念逐渐成为软件工程的主流，这种呼声也越来越大。然而，并没有出现一个清晰的函数式继承者目录，继承了著名的《设计模式》[Gamma等人，1994年]。本文探讨了函数式设计模式目录可能是什么样子的问题。
2. 函数式设计模式的一个样本： 从领域驱动设计[Evans 2003; Wlaschin 2017]中汲取灵感，每个设计模式都围绕一个“领域模式”，即在许多软件应用领域中出现的独立语言概念。领域模式以心理模式理论[Rumelhart 1980]中使用的“模式”来描述。
	1. Witness 模式：只有在满足特定条件后才能执行的动作。 案例研究：考虑一个网站，它有普通用户和管理员用户，并且有一个只有登录为管理员的用户才能访问的管理面板。
	2. 状态机模式：对象存在于多个状态之一，可以响应事件转换到其他状态。 案例研究：考虑一个文件模型，有三个状态：读取、文件结束和关闭。
	3. 并行列表模式：两个具有并行关系的异构元素列表。 案例研究：考虑一个printf风格的字符串格式化程序，它采用模板列表（字符串文字和占位符）和参数列表（要转换为字符串的值）。
	4. 注册表模式：对象将键映射到异构值，用户可以为值注册键请求。 案例研究：考虑一个事件系统，其中包含事件（值）和名称（键），例如OnClick代表鼠标点击。
3. 相关工作： 本文展示了四种模式的详细情况后，我们应该退一步考虑这种展示风格与以前关于教授函数式系统设计的工作的关系。
4. 讨论： 本文的一个目标是推进作者对函数式设计模式的特定愿景。但另一个目标是在相关的学术和工业界内促进讨论，讨论的关键问题是：如果有的话，应该将哪些知识表述为类型化函数设计模式？或者换句话说，开发人员需要知道什么，目前还没有关于如何在函数式语言中设计有效系统的相关文档？